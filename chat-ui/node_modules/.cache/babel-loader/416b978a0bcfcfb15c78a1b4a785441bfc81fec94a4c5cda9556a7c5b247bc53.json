{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import{Input,MessageList}from\"react-chat-elements\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[pdfId,setPdfId]=useState(null);const[question,setQuestion]=useState(\"\");const[chat,setChat]=useState([]);const uploadPDF=async e=>{const file=e.target.files[0];const formData=new FormData();formData.append(\"file\",file);try{const response=await axios.post(\"/upload\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}});setPdfId(response.data.pdfId);setChat([...chat,{position:\"left\",type:\"text\",title:\"system\",text:\"PDF uploaded successfully.\"}]);}catch(error){console.error(\"Error uploading PDF:\",error);}};const askQuestion=async()=>{if(!pdfId){alert(\"Please upload a PDF first.\");return;}try{const response=await axios.post(\"/ask\",{question,pdfId});setChat([...chat,{position:\"right\",type:\"text\",title:\"You\",text:question},{position:\"left\",type:\"text\",title:\"bot\",text:response.data.answer}]);setQuestion(\"\");}catch(error){console.error(\"Error asking question:\",error);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"#ededed\",padding:\"10px\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Chat with PDF\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:uploadPDF}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"chatbox\",children:[/*#__PURE__*/_jsx(MessageList,{className:\"message-list\",lockable:true,toBottomHeight:\"100MessageList%\",dataSource:chat}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Input,{style:{marginTop:\"10px\"},placeholder:\"Type here...\",multiline:true,value:question,onChange:e=>setQuestion(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{style:{marginTop:\"10px\"},onClick:askQuestion,children:\"Ask\"})]})]})});}export default App;","map":{"version":3,"names":["React","useState","axios","Input","MessageList","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","pdfId","setPdfId","question","setQuestion","chat","setChat","uploadPDF","e","file","target","files","formData","FormData","append","response","post","headers","data","position","type","title","text","error","console","askQuestion","alert","answer","children","style","backgroundColor","padding","onChange","className","lockable","toBottomHeight","dataSource","marginTop","placeholder","multiline","value","onClick"],"sources":["/home/god/pdf-chat-ai/chat-ui/src/App.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { Input, MessageList } from \"react-chat-elements\";\n\nfunction App() {\n  const [pdfId, setPdfId] = useState(null);\n  const [question, setQuestion] = useState(\"\");\n  const [chat, setChat] = useState([]);\n\n  const uploadPDF = async (e) => {\n    const file = e.target.files[0];\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    try {\n      const response = await axios.post(\"/upload\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      });\n      setPdfId(response.data.pdfId);\n      setChat([\n        ...chat,\n        {\n          position: \"left\",\n          type: \"text\",\n          title: \"system\",\n          text: \"PDF uploaded successfully.\",\n        },\n      ]);\n    } catch (error) {\n      console.error(\"Error uploading PDF:\", error);\n    }\n  };\n\n  const askQuestion = async () => {\n    if (!pdfId) {\n      alert(\"Please upload a PDF first.\");\n      return;\n    }\n\n    try {\n      const response = await axios.post(\"/ask\", { question, pdfId });\n      setChat([\n        ...chat,\n        {\n          position: \"right\",\n          type: \"text\",\n          title: \"You\",\n          text: question,\n        },\n        {\n          position: \"left\",\n          type: \"text\",\n          title: \"bot\",\n          text: response.data.answer,\n        },\n      ]);\n      setQuestion(\"\");\n    } catch (error) {\n      console.error(\"Error asking question:\", error);\n    }\n  };\n\n  return (\n    <>\n      <div style={{ backgroundColor: \"#ededed\", padding: \"10px\" }}>\n        <h1>Chat with PDF</h1>\n        <input type=\"file\" onChange={uploadPDF} />\n        <br />\n        <div className=\"chatbox\">\n          <MessageList\n            className=\"message-list\"\n            lockable={true}\n            toBottomHeight={\"100MessageList%\"}\n            dataSource={chat}\n          />\n          <br />\n          <Input\n            style={{ marginTop: \"10px\" }}\n            placeholder=\"Type here...\"\n            multiline={true}\n            value={question}\n            onChange={(e) => setQuestion(e.target.value)}\n          />\n          <button style={{ marginTop: \"10px\" }} onClick={askQuestion}>\n            Ask\n          </button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}